<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Water Intake and Diabetes in US Adults: NHANES 2021-2023</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Overview</a>
</li>
<li>
  <a href="data.html">Data</a>
</li>
<li>
  <a href="methods.html">Methods</a>
</li>
<li>
  <a href="results.html">Results</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Jimmy-ze/p8105_final_project">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="awaiting">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Water Intake and Diabetes in US Adults:
NHANES 2021-2023</h1>

</div>


<div id="load-packages-and-data" class="section level1">
<h1>Load Packages and Data</h1>
<pre class="r"><code>library(tidyverse)
library(readxl)
library(tableone)
library(knitr)
library(kableExtra)
library(patchwork)
library(ggpubr)
library(corrplot)
library(gtsummary)

#Read data
data &lt;- read_excel(&quot;final_data.xlsx&quot;)</code></pre>
</div>
<div id="data-preparation" class="section level1">
<h1>Data Preparation</h1>
<pre class="r"><code>df &lt;- data %&gt;%
  #Filter out Race categories with 0 observations
  filter(!Race %in% c(6, 7)) %&gt;%
  mutate(
    #Continuous variables as numeric
    Age = as.numeric(Age),
    BMI = as.numeric(BMI),
    Income_PIR = as.numeric(Income_PIR),
    Energy_kcal = as.numeric(Energy_kcal),
    Sugar_g = as.numeric(Sugar_g),
    Water_g = as.numeric(Water_g),
    HbA1c = as.numeric(HbA1c),
    
    #Categorical variables as factors
    Gender = factor(Gender, levels = c(0, 1), 
                   labels = c(&quot;Female&quot;, &quot;Male&quot;)),
    
    #Only keep Race categories with data (1,2,3,4)
    Race = factor(Race, levels = c(1, 2, 3, 4),
                 labels = c(&quot;Mexican American&quot;, &quot;Other Hispanic&quot;, 
                           &quot;Non-Hispanic White&quot;, &quot;Non-Hispanic Black&quot;)),
    
    Education = factor(Education, levels = c(1, 2, 3, 4, 5),
                      labels = c(&quot;&lt; 9th grade&quot;, &quot;9-11th grade&quot;, 
                                &quot;High school/GED&quot;, &quot;Some college&quot;, 
                                &quot;College grad+&quot;)),
    
    Smoking = factor(Smoking, levels = c(0, 1),
                    labels = c(&quot;No&quot;, &quot;Yes&quot;)),
    
    Diabetes = factor(Diabetes, levels = c(0, 1),
                     labels = c(&quot;No&quot;, &quot;Yes&quot;)),
    
    #Create water quartiles
    Water_Q = cut(Water_g, 
                  breaks = quantile(Water_g, probs = seq(0, 1, 0.25)),
                  labels = c(&quot;Q1&quot;, &quot;Q2&quot;, &quot;Q3&quot;, &quot;Q4&quot;),
                  include.lowest = TRUE)
  )</code></pre>
</div>
<div id="table-1-baseline-characteristics-by-diabetes-status"
class="section level1">
<h1>Table 1: Baseline Characteristics by Diabetes Status</h1>
<pre class="r"><code>#Create table
tab1 &lt;- CreateTableOne(
  vars = c(&quot;Age&quot;, &quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, 
           &quot;Smoking&quot;, &quot;Energy_kcal&quot;, &quot;Sugar_g&quot;, &quot;Water_g&quot;, &quot;HbA1c&quot;),
  strata = &quot;Diabetes&quot;,
  data = df,
  factorVars = c(&quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;Smoking&quot;),
  test = FALSE
)

#Get table output (median/IQR for continuous)
tab1_print &lt;- print(tab1, 
                   nonnormal = c(&quot;Age&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, &quot;Energy_kcal&quot;, 
                                &quot;Sugar_g&quot;, &quot;Water_g&quot;, &quot;HbA1c&quot;),
                   showAllLevels = TRUE,
                   printToggle = FALSE)

#Calculate p-values
#Continuous: Wilcoxon test
#Categorical: Chi-square test
p_vals &lt;- c(
  wilcox.test(Age ~ Diabetes, data = df)$p.value,
  wilcox.test(BMI ~ Diabetes, data = df)$p.value,
  wilcox.test(Income_PIR ~ Diabetes, data = df)$p.value,
  wilcox.test(Energy_kcal ~ Diabetes, data = df)$p.value,
  wilcox.test(Sugar_g ~ Diabetes, data = df)$p.value,
  wilcox.test(Water_g ~ Diabetes, data = df)$p.value,
  wilcox.test(HbA1c ~ Diabetes, data = df)$p.value,
  chisq.test(table(df$Gender, df$Diabetes))$p.value,
  chisq.test(table(df$Race, df$Diabetes))$p.value,
  chisq.test(table(df$Education, df$Diabetes))$p.value,
  chisq.test(table(df$Smoking, df$Diabetes))$p.value
)

#Format p-values
format_p &lt;- function(p) {
  if(is.na(p)) return(&quot;NA&quot;)
  if(p &lt; 0.001) return(&quot;&lt;0.001&quot;)
  return(sprintf(&quot;%.3f&quot;, p))
}

p_fmt &lt;- sapply(p_vals, format_p)

#Add to table
tab1_df &lt;- as.data.frame(tab1_print)
tab1_df$P &lt;- &quot;&quot;
var_names &lt;- c(&quot;Age&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, &quot;Energy_kcal&quot;, &quot;Sugar_g&quot;, 
               &quot;Water_g&quot;, &quot;HbA1c&quot;, &quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;Smoking&quot;)
for(i in 1:length(var_names)) {
  rows &lt;- grep(var_names[i], rownames(tab1_df))
  if(length(rows) &gt; 0) tab1_df$P[rows[1]] &lt;- p_fmt[i]
}

#show
kable(tab1_df, caption = &quot;Table 1: Baseline Characteristics by Diabetes Status&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
  footnote(general = c(&quot;Continuous variables: Median (IQR), Wilcoxon rank-sum test&quot;,
                      &quot;Categorical variables: n (%), Chi-square test&quot;))</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption>
Table 1: Baseline Characteristics by Diabetes Status
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
level
</th>
<th style="text-align:left;">
No
</th>
<th style="text-align:left;">
Yes
</th>
<th style="text-align:left;">
P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
3327
</td>
<td style="text-align:left;">
558
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Age..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
57.00 [39.00, 67.00]
</td>
<td style="text-align:left;">
64.00 [57.00, 71.00]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Gender….
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
1894 (56.9)
</td>
<td style="text-align:left;">
282 (50.5)
</td>
<td style="text-align:left;">
0.006
</td>
</tr>
<tr>
<td style="text-align:left;">
X
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
1433 (43.1)
</td>
<td style="text-align:left;">
276 (49.5)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Race….
</td>
<td style="text-align:left;">
Mexican American
</td>
<td style="text-align:left;">
193 ( 6.5)
</td>
<td style="text-align:left;">
46 ( 9.2)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X.1
</td>
<td style="text-align:left;">
Other Hispanic
</td>
<td style="text-align:left;">
300 (10.1)
</td>
<td style="text-align:left;">
64 (12.9)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.2
</td>
<td style="text-align:left;">
Non-Hispanic White
</td>
<td style="text-align:left;">
2159 (72.5)
</td>
<td style="text-align:left;">
304 (61.0)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.3
</td>
<td style="text-align:left;">
Non-Hispanic Black
</td>
<td style="text-align:left;">
327 (11.0)
</td>
<td style="text-align:left;">
84 (16.9)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Education….
</td>
<td style="text-align:left;">
&lt; 9th grade
</td>
<td style="text-align:left;">
90 ( 2.7)
</td>
<td style="text-align:left;">
39 ( 7.0)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X.4
</td>
<td style="text-align:left;">
9-11th grade
</td>
<td style="text-align:left;">
178 ( 5.4)
</td>
<td style="text-align:left;">
77 (13.8)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.5
</td>
<td style="text-align:left;">
High school/GED
</td>
<td style="text-align:left;">
617 (18.5)
</td>
<td style="text-align:left;">
138 (24.7)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.6
</td>
<td style="text-align:left;">
Some college
</td>
<td style="text-align:left;">
1006 (30.2)
</td>
<td style="text-align:left;">
183 (32.8)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.7
</td>
<td style="text-align:left;">
College grad+
</td>
<td style="text-align:left;">
1436 (43.2)
</td>
<td style="text-align:left;">
121 (21.7)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
BMI..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
28.00 [24.40, 32.70]
</td>
<td style="text-align:left;">
32.60 [27.90, 37.35]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Income_PIR..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
3.22 [1.65, 5.00]
</td>
<td style="text-align:left;">
2.21 [1.26, 4.01]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Smoking….
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
2012 (60.5)
</td>
<td style="text-align:left;">
268 (48.0)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X.8
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
1315 (39.5)
</td>
<td style="text-align:left;">
290 (52.0)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Energy_kcal..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1867.00 [1399.00, 2458.00]
</td>
<td style="text-align:left;">
1773.00 [1247.25, 2357.75]
</td>
<td style="text-align:left;">
0.002
</td>
</tr>
<tr>
<td style="text-align:left;">
Sugar_g..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
82.46 [50.90, 125.46]
</td>
<td style="text-align:left;">
74.00 [45.72, 108.14]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Water_g..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
2756.62 [2002.84, 3665.29]
</td>
<td style="text-align:left;">
2631.43 [1900.07, 3559.98]
</td>
<td style="text-align:left;">
0.050
</td>
</tr>
<tr>
<td style="text-align:left;">
HbA1c..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
5.40 [5.20, 5.70]
</td>
<td style="text-align:left;">
7.00 [6.30, 8.10]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Continuous variables: Median (IQR), Wilcoxon rank-sum test
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Categorical variables: n (%), Chi-square test
</td>
</tr>
</tfoot>
</table>
<pre class="r"><code>write.csv(tab1_df, &quot;Table1.csv&quot;)</code></pre>
</div>
<div id="table-2-baseline-characteristics-by-water-quartiles"
class="section level1">
<h1>Table 2: Baseline Characteristics by Water Quartiles</h1>
<pre class="r"><code>#Create table
tab2 &lt;- CreateTableOne(
  vars = c(&quot;Age&quot;, &quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, 
           &quot;Smoking&quot;, &quot;Energy_kcal&quot;, &quot;Sugar_g&quot;, &quot;HbA1c&quot;, &quot;Diabetes&quot;),
  strata = &quot;Water_Q&quot;,
  data = df,
  factorVars = c(&quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;Smoking&quot;, &quot;Diabetes&quot;),
  test = FALSE
)

#table output
tab2_print &lt;- print(tab2,
                   nonnormal = c(&quot;Age&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, &quot;Energy_kcal&quot;, 
                                &quot;Sugar_g&quot;, &quot;HbA1c&quot;),
                   showAllLevels = TRUE,
                   printToggle = FALSE)

#Calculate p-values
#Continuous: Kruskal-Wallis test (&gt;2 groups)
#Categorical: Chi-square test
p_vals2 &lt;- c(
  kruskal.test(Age ~ Water_Q, data = df)$p.value,
  kruskal.test(BMI ~ Water_Q, data = df)$p.value,
  kruskal.test(Income_PIR ~ Water_Q, data = df)$p.value,
  kruskal.test(Energy_kcal ~ Water_Q, data = df)$p.value,
  kruskal.test(Sugar_g ~ Water_Q, data = df)$p.value,
  kruskal.test(HbA1c ~ Water_Q, data = df)$p.value,
  chisq.test(table(df$Gender, df$Water_Q))$p.value,
  chisq.test(table(df$Race, df$Water_Q))$p.value,
  chisq.test(table(df$Education, df$Water_Q))$p.value,
  chisq.test(table(df$Smoking, df$Water_Q))$p.value,
  chisq.test(table(df$Diabetes, df$Water_Q))$p.value
)

#format
p_fmt2 &lt;- sapply(p_vals2, format_p)

#add to table
tab2_df &lt;- as.data.frame(tab2_print)
tab2_df$P &lt;- &quot;&quot;
var_names2 &lt;- c(&quot;Age&quot;, &quot;BMI&quot;, &quot;Income_PIR&quot;, &quot;Energy_kcal&quot;, &quot;Sugar_g&quot;, &quot;HbA1c&quot;,
                &quot;Gender&quot;, &quot;Race&quot;, &quot;Education&quot;, &quot;Smoking&quot;, &quot;Diabetes&quot;)
for(i in 1:length(var_names2)) {
  rows &lt;- grep(var_names2[i], rownames(tab2_df))
  if(length(rows) &gt; 0) tab2_df$P[rows[1]] &lt;- p_fmt2[i]
}

#show
kable(tab2_df, caption = &quot;Table 2: Baseline Characteristics by Water Quartiles&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
  footnote(general = c(&quot;Continuous variables: Median (IQR), Kruskal-Wallis test&quot;,
                      &quot;Categorical variables: n (%), Chi-square test&quot;))</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption>
Table 2: Baseline Characteristics by Water Quartiles
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
level
</th>
<th style="text-align:left;">
Q1
</th>
<th style="text-align:left;">
Q2
</th>
<th style="text-align:left;">
Q3
</th>
<th style="text-align:left;">
Q4
</th>
<th style="text-align:left;">
P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
972
</td>
<td style="text-align:left;">
971
</td>
<td style="text-align:left;">
971
</td>
<td style="text-align:left;">
971
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Age..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
62.00 [45.00, 71.00]
</td>
<td style="text-align:left;">
61.00 [44.00, 70.00]
</td>
<td style="text-align:left;">
58.00 [41.00, 67.00]
</td>
<td style="text-align:left;">
51.00 [36.50, 63.00]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Gender….
</td>
<td style="text-align:left;">
Female
</td>
<td style="text-align:left;">
622 (64.0)
</td>
<td style="text-align:left;">
572 (58.9)
</td>
<td style="text-align:left;">
542 (55.8)
</td>
<td style="text-align:left;">
440 (45.3)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X
</td>
<td style="text-align:left;">
Male
</td>
<td style="text-align:left;">
350 (36.0)
</td>
<td style="text-align:left;">
399 (41.1)
</td>
<td style="text-align:left;">
429 (44.2)
</td>
<td style="text-align:left;">
531 (54.7)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Race….
</td>
<td style="text-align:left;">
Mexican American
</td>
<td style="text-align:left;">
61 ( 6.9)
</td>
<td style="text-align:left;">
47 ( 5.4)
</td>
<td style="text-align:left;">
64 ( 7.4)
</td>
<td style="text-align:left;">
67 ( 7.8)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X.1
</td>
<td style="text-align:left;">
Other Hispanic
</td>
<td style="text-align:left;">
120 (13.6)
</td>
<td style="text-align:left;">
88 (10.1)
</td>
<td style="text-align:left;">
78 ( 9.0)
</td>
<td style="text-align:left;">
78 ( 9.1)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.2
</td>
<td style="text-align:left;">
Non-Hispanic White
</td>
<td style="text-align:left;">
553 (62.8)
</td>
<td style="text-align:left;">
630 (72.4)
</td>
<td style="text-align:left;">
635 (73.2)
</td>
<td style="text-align:left;">
645 (75.2)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.3
</td>
<td style="text-align:left;">
Non-Hispanic Black
</td>
<td style="text-align:left;">
147 (16.7)
</td>
<td style="text-align:left;">
105 (12.1)
</td>
<td style="text-align:left;">
91 (10.5)
</td>
<td style="text-align:left;">
68 ( 7.9)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Education….
</td>
<td style="text-align:left;">
&lt; 9th grade
</td>
<td style="text-align:left;">
59 ( 6.1)
</td>
<td style="text-align:left;">
21 ( 2.2)
</td>
<td style="text-align:left;">
25 ( 2.6)
</td>
<td style="text-align:left;">
24 ( 2.5)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
X.4
</td>
<td style="text-align:left;">
9-11th grade
</td>
<td style="text-align:left;">
95 ( 9.8)
</td>
<td style="text-align:left;">
60 ( 6.2)
</td>
<td style="text-align:left;">
55 ( 5.7)
</td>
<td style="text-align:left;">
45 ( 4.6)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.5
</td>
<td style="text-align:left;">
High school/GED
</td>
<td style="text-align:left;">
229 (23.6)
</td>
<td style="text-align:left;">
196 (20.2)
</td>
<td style="text-align:left;">
169 (17.4)
</td>
<td style="text-align:left;">
161 (16.6)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.6
</td>
<td style="text-align:left;">
Some college
</td>
<td style="text-align:left;">
287 (29.5)
</td>
<td style="text-align:left;">
303 (31.2)
</td>
<td style="text-align:left;">
290 (29.9)
</td>
<td style="text-align:left;">
309 (31.8)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
X.7
</td>
<td style="text-align:left;">
College grad+
</td>
<td style="text-align:left;">
302 (31.1)
</td>
<td style="text-align:left;">
391 (40.3)
</td>
<td style="text-align:left;">
432 (44.5)
</td>
<td style="text-align:left;">
432 (44.5)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
BMI..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
28.50 [24.80, 33.60]
</td>
<td style="text-align:left;">
28.50 [25.00, 33.60]
</td>
<td style="text-align:left;">
28.60 [24.90, 33.50]
</td>
<td style="text-align:left;">
28.40 [24.50, 33.65]
</td>
<td style="text-align:left;">
0.908
</td>
</tr>
<tr>
<td style="text-align:left;">
Income_PIR..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
2.40 [1.16, 4.41]
</td>
<td style="text-align:left;">
3.00 [1.69, 5.00]
</td>
<td style="text-align:left;">
3.26 [1.67, 5.00]
</td>
<td style="text-align:left;">
3.56 [1.77, 5.00]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Smoking….
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
576 (59.3)
</td>
<td style="text-align:left;">
600 (61.8)
</td>
<td style="text-align:left;">
564 (58.1)
</td>
<td style="text-align:left;">
540 (55.6)
</td>
<td style="text-align:left;">
0.048
</td>
</tr>
<tr>
<td style="text-align:left;">
X.8
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
396 (40.7)
</td>
<td style="text-align:left;">
371 (38.2)
</td>
<td style="text-align:left;">
407 (41.9)
</td>
<td style="text-align:left;">
431 (44.4)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Energy_kcal..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
1537.00 [1112.50, 1948.25]
</td>
<td style="text-align:left;">
1784.00 [1362.00, 2286.00]
</td>
<td style="text-align:left;">
1959.00 [1472.00, 2573.00]
</td>
<td style="text-align:left;">
2260.00 [1681.00, 2998.00]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Sugar_g..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
69.72 [42.77, 105.96]
</td>
<td style="text-align:left;">
81.77 [50.90, 120.00]
</td>
<td style="text-align:left;">
82.29 [51.87, 127.27]
</td>
<td style="text-align:left;">
92.63 [56.71, 145.06]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
HbA1c..median..IQR..
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
5.60 [5.30, 5.90]
</td>
<td style="text-align:left;">
5.60 [5.30, 6.00]
</td>
<td style="text-align:left;">
5.50 [5.30, 5.80]
</td>
<td style="text-align:left;">
5.40 [5.20, 5.80]
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Diabetes….
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
821 (84.5)
</td>
<td style="text-align:left;">
821 (84.6)
</td>
<td style="text-align:left;">
843 (86.8)
</td>
<td style="text-align:left;">
842 (86.7)
</td>
<td style="text-align:left;">
0.258
</td>
</tr>
<tr>
<td style="text-align:left;">
X.9
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
151 (15.5)
</td>
<td style="text-align:left;">
150 (15.4)
</td>
<td style="text-align:left;">
128 (13.2)
</td>
<td style="text-align:left;">
129 (13.3)
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Continuous variables: Median (IQR), Kruskal-Wallis test
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Categorical variables: n (%), Chi-square test
</td>
</tr>
</tfoot>
</table>
<pre class="r"><code>write.csv(tab2_df, &quot;Table2.csv&quot;)</code></pre>
</div>
<div id="logistic-regression-diabetes-risk" class="section level1">
<h1>Logistic Regression: Diabetes Risk</h1>
<pre class="r"><code>#3 models
m1 &lt;- glm(Diabetes ~ Water_g, data = df, family = binomial)
m2 &lt;- glm(Diabetes ~ Water_g + Age + Gender + Race + Education + Income_PIR, 
          data = df, family = binomial)
m3 &lt;- glm(Diabetes ~ Water_g + Age + Gender + Race + Education + Income_PIR + 
            BMI + Smoking + Energy_kcal + Sugar_g, 
          data = df, family = binomial)

#Extract result
get_OR &lt;- function(model, name) {
  coef &lt;- summary(model)$coefficients[&quot;Water_g&quot;, ]
  data.frame(
    Model = name,
    OR = exp(coef[1]),
    Lower = exp(coef[1] - 1.96*coef[2]),
    Upper = exp(coef[1] + 1.96*coef[2]),
    P = coef[4]
  )
}

or_results &lt;- rbind(
  get_OR(m1, &quot;Unadjusted&quot;),
  get_OR(m2, &quot;Adjusted: Demographics&quot;),
  get_OR(m3, &quot;Fully Adjusted&quot;)
)

#format and display
or_results %&gt;%
  mutate(
    `OR (95% CI)` = sprintf(&quot;%.4f (%.4f-%.4f)&quot;, OR, Lower, Upper),
    P = ifelse(P &lt; 0.001, &quot;&lt;0.001&quot;, sprintf(&quot;%.3f&quot;, P))
  ) %&gt;%
  select(Model, `OR (95% CI)`, P) %&gt;%
  kable(caption = &quot;Logistic Regression: Association with Diabetes&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;))</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
Logistic Regression: Association with Diabetes
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Model
</th>
<th style="text-align:left;">
OR (95% CI)
</th>
<th style="text-align:left;">
P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Estimate
</td>
<td style="text-align:left;">
Unadjusted
</td>
<td style="text-align:left;">
1.0000 (0.9999-1.0000)
</td>
<td style="text-align:left;">
0.198
</td>
</tr>
<tr>
<td style="text-align:left;">
Estimate1
</td>
<td style="text-align:left;">
Adjusted: Demographics
</td>
<td style="text-align:left;">
1.0001 (1.0000-1.0002)
</td>
<td style="text-align:left;">
0.004
</td>
</tr>
<tr>
<td style="text-align:left;">
Estimate2
</td>
<td style="text-align:left;">
Fully Adjusted
</td>
<td style="text-align:left;">
1.0001 (1.0000-1.0002)
</td>
<td style="text-align:left;">
0.002
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#Full model output
summary(m3)</code></pre>
<pre><code>## 
## Call:
## glm(formula = Diabetes ~ Water_g + Age + Gender + Race + Education + 
##     Income_PIR + BMI + Smoking + Energy_kcal + Sugar_g, family = binomial, 
##     data = df)
## 
## Coefficients:
##                            Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)              -6.358e+00  4.685e-01 -13.573  &lt; 2e-16 ***
## Water_g                   1.100e-04  3.617e-05   3.041 0.002361 ** 
## Age                       4.988e-02  4.166e-03  11.975  &lt; 2e-16 ***
## GenderMale                3.210e-01  1.127e-01   2.848 0.004400 ** 
## RaceOther Hispanic       -6.405e-02  2.341e-01  -0.274 0.784386    
## RaceNon-Hispanic White   -5.395e-01  2.067e-01  -2.610 0.009061 ** 
## RaceNon-Hispanic Black    7.489e-02  2.307e-01   0.325 0.745511    
## Education9-11th grade     1.478e-01  2.659e-01   0.556 0.578414    
## EducationHigh school/GED -3.143e-01  2.469e-01  -1.273 0.202950    
## EducationSome college    -3.939e-01  2.470e-01  -1.594 0.110870    
## EducationCollege grad+   -8.814e-01  2.638e-01  -3.341 0.000836 ***
## Income_PIR               -1.273e-01  3.863e-02  -3.295 0.000983 ***
## BMI                       7.810e-02  6.896e-03  11.325  &lt; 2e-16 ***
## SmokingYes                1.489e-01  1.091e-01   1.364 0.172527    
## Energy_kcal               1.177e-04  8.020e-05   1.468 0.142102    
## Sugar_g                  -4.407e-03  1.117e-03  -3.944 8.01e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2856.6  on 3476  degrees of freedom
## Residual deviance: 2429.4  on 3461  degrees of freedom
##   (因为不存在，408个观察量被删除了)
## AIC: 2461.4
## 
## Number of Fisher Scoring iterations: 5</code></pre>
</div>
<div id="linear-regression-hba1c-levels" class="section level1">
<h1>Linear Regression: HbA1c Levels</h1>
<pre class="r"><code>#3 models
lm1 &lt;- lm(HbA1c ~ Water_g, data = df)
lm2 &lt;- lm(HbA1c ~ Water_g + Age + Gender + Race + Education + Income_PIR, 
          data = df)
lm3 &lt;- lm(HbA1c ~ Water_g + Age + Gender + Race + Education + Income_PIR + 
            BMI + Smoking + Energy_kcal + Sugar_g, 
          data = df)

#Extract results
get_Beta &lt;- function(model, name) {
  coef &lt;- summary(model)$coefficients[&quot;Water_g&quot;, ]
  ci &lt;- confint(model)[&quot;Water_g&quot;, ]
  data.frame(
    Model = name,
    Beta = coef[1],
    Lower = ci[1],
    Upper = ci[2],
    P = coef[4]
  )
}

beta_results &lt;- rbind(
  get_Beta(lm1, &quot;Unadjusted&quot;),
  get_Beta(lm2, &quot;Adjusted: Demographics&quot;),
  get_Beta(lm3, &quot;Fully Adjusted&quot;)
)

#format and display
beta_results %&gt;%
  mutate(
    `Beta (95% CI)` = sprintf(&quot;%.6f (%.6f, %.6f)&quot;, Beta, Lower, Upper),
    P = ifelse(P &lt; 0.001, &quot;&lt;0.001&quot;, sprintf(&quot;%.3f&quot;, P))
  ) %&gt;%
  select(Model, `Beta (95% CI)`, P) %&gt;%
  kable(caption = &quot;Linear Regression: Association with HbA1c&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;))</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
Linear Regression: Association with HbA1c
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Model
</th>
<th style="text-align:left;">
Beta (95% CI)
</th>
<th style="text-align:left;">
P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Estimate
</td>
<td style="text-align:left;">
Unadjusted
</td>
<td style="text-align:left;">
-0.000020 (-0.000044, 0.000003)
</td>
<td style="text-align:left;">
0.092
</td>
</tr>
<tr>
<td style="text-align:left;">
Estimate1
</td>
<td style="text-align:left;">
Adjusted: Demographics
</td>
<td style="text-align:left;">
0.000044 (0.000020, 0.000068)
</td>
<td style="text-align:left;">
&lt;0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Estimate2
</td>
<td style="text-align:left;">
Fully Adjusted
</td>
<td style="text-align:left;">
0.000042 (0.000017, 0.000067)
</td>
<td style="text-align:left;">
0.001
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#full model output
summary(lm3)</code></pre>
<pre><code>## 
## Call:
## lm(formula = HbA1c ~ Water_g + Age + Gender + Race + Education + 
##     Income_PIR + BMI + Smoking + Energy_kcal + Sugar_g, data = df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2.7854 -0.4509 -0.1599  0.1395 11.2274 
## 
## Coefficients:
##                            Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)               4.599e+00  1.487e-01  30.917  &lt; 2e-16 ***
## Water_g                   4.187e-05  1.276e-05   3.282  0.00104 ** 
## Age                       1.678e-02  1.095e-03  15.322  &lt; 2e-16 ***
## GenderMale                6.497e-02  3.695e-02   1.758  0.07875 .  
## RaceOther Hispanic       -1.950e-01  8.447e-02  -2.309  0.02099 *  
## RaceNon-Hispanic White   -3.628e-01  7.274e-02  -4.988 6.41e-07 ***
## RaceNon-Hispanic Black   -9.309e-02  8.420e-02  -1.105  0.26903    
## Education9-11th grade     7.774e-02  1.145e-01   0.679  0.49730    
## EducationHigh school/GED -2.090e-01  1.027e-01  -2.036  0.04183 *  
## EducationSome college    -3.141e-01  1.017e-01  -3.090  0.00202 ** 
## EducationCollege grad+   -4.566e-01  1.049e-01  -4.351 1.39e-05 ***
## Income_PIR               -3.888e-02  1.267e-02  -3.069  0.00216 ** 
## BMI                       2.714e-02  2.387e-03  11.369  &lt; 2e-16 ***
## SmokingYes                4.514e-02  3.662e-02   1.233  0.21777    
## Energy_kcal               2.105e-05  2.672e-05   0.788  0.43094    
## Sugar_g                  -7.360e-04  3.282e-04  -2.243  0.02497 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.006 on 3461 degrees of freedom
##   (因为不存在，408个观察量被删除了)
## Multiple R-squared:  0.1511, Adjusted R-squared:  0.1475 
## F-statistic: 41.09 on 15 and 3461 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="sensitivity-analysis-water-quartiles" class="section level1">
<h1>Sensitivity Analysis: Water Quartiles</h1>
<pre class="r"><code>#Set reference group
df$Water_Q &lt;- relevel(df$Water_Q, ref = &quot;Q1&quot;)

#Logistic regression by quartiles
mQ &lt;- glm(Diabetes ~ Water_Q + Age + Gender + Race + Education + Income_PIR + 
            BMI + Smoking + Energy_kcal + Sugar_g,
          data = df, family = binomial)

#Extract quartile results
coef_q &lt;- summary(mQ)$coefficients
q_vars &lt;- grep(&quot;Water_Q&quot;, rownames(coef_q), value = TRUE)

q_results &lt;- data.frame(
  Quartile = c(&quot;Q1 (Ref)&quot;, q_vars),
  OR = c(1, exp(coef_q[q_vars, 1])),
  Lower = c(NA, exp(coef_q[q_vars, 1] - 1.96*coef_q[q_vars, 2])),
  Upper = c(NA, exp(coef_q[q_vars, 1] + 1.96*coef_q[q_vars, 2])),
  P = c(NA, coef_q[q_vars, 4])
)

#show
q_results %&gt;%
  mutate(
    Quartile = str_replace(Quartile, &quot;Water_Q&quot;, &quot;&quot;),
    `OR (95% CI)` = ifelse(is.na(OR), &quot;1.00 (Ref)&quot;, 
                           sprintf(&quot;%.3f (%.3f-%.3f)&quot;, OR, Lower, Upper)),
    P = ifelse(is.na(P), &quot;-&quot;, 
              ifelse(P &lt; 0.001, &quot;&lt;0.001&quot;, sprintf(&quot;%.3f&quot;, P)))
  ) %&gt;%
  select(Quartile, `OR (95% CI)`, P) %&gt;%
  kable(caption = &quot;Diabetes Risk by Water Intake Quartiles (Fully Adjusted)&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;))</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
Diabetes Risk by Water Intake Quartiles (Fully Adjusted)
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Quartile
</th>
<th style="text-align:left;">
OR (95% CI)
</th>
<th style="text-align:left;">
P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Q1 (Ref)
</td>
<td style="text-align:left;">
1.000 (NA-NA)
</td>
<td style="text-align:left;">
<ul>
<li></td>
</tr>
<tr>
<td style="text-align:left;">
Water_QQ2
</td>
<td style="text-align:left;">
Q2
</td>
<td style="text-align:left;">
1.271 (0.955-1.692)
</td>
<td style="text-align:left;">
0.100
</td>
</tr>
<tr>
<td style="text-align:left;">
Water_QQ3
</td>
<td style="text-align:left;">
Q3
</td>
<td style="text-align:left;">
1.297 (0.959-1.756)
</td>
<td style="text-align:left;">
0.091
</td>
</tr>
<tr>
<td style="text-align:left;">
Water_QQ4
</td>
<td style="text-align:left;">
Q4
</td>
<td style="text-align:left;">
1.605 (1.166-2.211)
</td>
<td style="text-align:left;">
0.004
</td>
</tr>
</tbody>
</table></li>
</ul>
<pre class="r"><code>#test across quartiles
cat(&quot;\nKruskal-Wallis test (HbA1c by water quartiles):\n&quot;)</code></pre>
<pre><code>## 
## Kruskal-Wallis test (HbA1c by water quartiles):</code></pre>
<pre class="r"><code>kw_test &lt;- kruskal.test(HbA1c ~ Water_Q, data = df)
print(kw_test)</code></pre>
<pre><code>## 
##  Kruskal-Wallis rank sum test
## 
## data:  HbA1c by Water_Q
## Kruskal-Wallis chi-squared = 37.745, df = 3, p-value = 3.201e-08</code></pre>
<pre class="r"><code>cat(&quot;\nChi-square test (Diabetes by water quartiles):\n&quot;)</code></pre>
<pre><code>## 
## Chi-square test (Diabetes by water quartiles):</code></pre>
<pre class="r"><code>chi_test &lt;- chisq.test(table(df$Water_Q, df$Diabetes))
print(chi_test)</code></pre>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  table(df$Water_Q, df$Diabetes)
## X-squared = 4.0322, df = 3, p-value = 0.258</code></pre>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<pre class="r"><code>cat(&quot;Analysis summary\n&quot;)</code></pre>
<pre><code>## Analysis summary</code></pre>
<pre class="r"><code>cat(sprintf(&quot;Sample size: %d\n&quot;, nrow(df)))</code></pre>
<pre><code>## Sample size: 3885</code></pre>
<pre class="r"><code>cat(sprintf(&quot;Diabetes prevalence: %.1f%%\n\n&quot;, 100*mean(df$Diabetes == &quot;Yes&quot;)))</code></pre>
<pre><code>## Diabetes prevalence: 14.4%</code></pre>
<pre class="r"><code>cat(&quot;Main Findings:\n&quot;)</code></pre>
<pre><code>## Main Findings:</code></pre>
<pre class="r"><code>cat(sprintf(&quot;Fully adjusted OR: %.4f (95%% CI: %.4f-%.4f), P=%.3f\n&quot;,
           or_results$OR[3], or_results$Lower[3], or_results$Upper[3], 
           or_results$P[3]))</code></pre>
<pre><code>## Fully adjusted OR: 1.0001 (95% CI: 1.0000-1.0002), P=0.002</code></pre>
<pre class="r"><code>cat(sprintf(&quot;Fully adjusted Beta: %.6f (95%% CI: %.6f-%.6f), P=%.3f\n&quot;,
           beta_results$Beta[3], beta_results$Lower[3], beta_results$Upper[3],
           beta_results$P[3]))</code></pre>
<pre><code>## Fully adjusted Beta: 0.000042 (95% CI: 0.000017-0.000067), P=0.001</code></pre>
</div>
<div id="visulizatioin" class="section level1">
<h1>visulizatioin</h1>
<pre class="r"><code>#Create figures folder
dir.create(&quot;figures&quot;, showWarnings = FALSE)

#Figure 1: Water intake distribution by diabetes status
p1 &lt;- ggplot(df, aes(x = Water_g, fill = Diabetes)) +
  geom_density(alpha = 0.4) +
  scale_fill_manual(values = c(&quot;No&quot; = &quot;#2c7bb6&quot;, &quot;Yes&quot; = &quot;pink&quot;)) +
  labs(title = &quot;Water Intake Distribution by Diabetes Status&quot;,
       x = &quot;Water Intake (g)&quot;, y = &quot;Density&quot;, fill = &quot;Diabetes&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;top&quot;)
print(p1)</code></pre>
<p><img src="coding_files/figure-html/visulization-1.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig1_water_distribution.png&quot;, p1, width = 8, height = 6, dpi = 300)

#Figure 2: BMI distribution by water quartiles
p2 &lt;- ggplot(df, aes(x = Water_Q, y = BMI, fill = Water_Q)) +
  geom_violin(alpha = 0.7) +
  geom_boxplot(width = 0.2, fill = &quot;white&quot;, outlier.alpha = 0.3) +
  stat_compare_means(method = &quot;anova&quot;) +
  scale_fill_manual(values = c(&quot;#d7191c&quot;, &quot;#fdae61&quot;, &quot;#abd9e9&quot;, &quot;#2c7bb6&quot;)) +
  labs(title = &quot;BMI Distribution by Water Intake Quartiles&quot;,
       x = &quot;Water Intake Quartile&quot;, y = &quot;BMI (kg/m2)&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;none&quot;)
print(p2)</code></pre>
<p><img src="coding_files/figure-html/visulization-2.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig2_bmi_quartiles.png&quot;, p2, width = 8, height = 6, dpi = 300)

#Figure 3: Water intake vs HbA1c by diabetes status
p3 &lt;- ggplot(df, aes(x = Water_g, y = HbA1c, color = Diabetes, fill = Diabetes)) +
  geom_point(alpha = 0.3, size = 1.5) +
  geom_smooth(method = &quot;loess&quot;, alpha = 0.2) +
  scale_color_manual(values = c(&quot;No&quot; = &quot;#2c7bb6&quot;, &quot;Yes&quot; = &quot;#d7191c&quot;)) +
  scale_fill_manual(values = c(&quot;No&quot; = &quot;#2c7bb6&quot;, &quot;Yes&quot; = &quot;#d7191c&quot;)) +
  labs(title = &quot;Water Intake vs HbA1c by Diabetes Status&quot;,
       x = &quot;Water Intake (g)&quot;, y = &quot;HbA1c (%)&quot;, 
       color = &quot;Diabetes&quot;, fill = &quot;Diabetes&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;top&quot;)
print(p3)</code></pre>
<p><img src="coding_files/figure-html/visulization-3.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig3_water_hba1c.png&quot;, p3, width = 8, height = 6, dpi = 300)

#Figure 4: Odds ratio forest plot
or_result &lt;- broom::tidy(m3, exponentiate = TRUE, conf.int = TRUE) %&gt;%
  filter(term == &quot;Water_g&quot;)

p4 &lt;- ggplot(or_result, aes(x = estimate, y = &quot;Water Intake&quot;)) +
  geom_vline(xintercept = 1, linetype = &quot;dashed&quot;, color = &quot;gray40&quot;) +
  geom_point(size = 4, color = &quot;#d7191c&quot;) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), 
                 height = 0.1, color = &quot;#d7191c&quot;, size = 1) +
  labs(title = &quot;Odds Ratio for Diabetes (Fully Adjusted)&quot;,
       x = &quot;Odds Ratio (95% CI)&quot;, y = &quot;&quot;) +
  theme_minimal()
print(p4)</code></pre>
<p><img src="coding_files/figure-html/visulization-4.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig4_odds_ratio.png&quot;, p4, width = 8, height = 4, dpi = 300)

#Figure 5: Beta coefficient plot
beta_result &lt;- broom::tidy(lm3, conf.int = TRUE) %&gt;%
  filter(term == &quot;Water_g&quot;)

p5 &lt;- ggplot(beta_result, aes(x = estimate, y = &quot;Water Intake&quot;)) +
  geom_vline(xintercept = 0, linetype = &quot;dashed&quot;, color = &quot;gray40&quot;) +
  geom_point(size = 4, color = &quot;#2c7bb6&quot;) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), 
                 height = 0.1, color = &quot;#2c7bb6&quot;, size = 1) +
  labs(title = &quot;Beta Coefficient for HbA1c (Fully Adjusted)&quot;,
       x = &quot;Beta Coefficient (95% CI)&quot;, y = &quot;&quot;) +
  theme_minimal()
print(p5)</code></pre>
<p><img src="coding_files/figure-html/visulization-5.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig5_beta_coefficient.png&quot;, p5, width = 8, height = 4, dpi = 300)

#Figure 6: Diabetes prevalence by quartiles
trend_dm &lt;- df %&gt;%
  group_by(Water_Q) %&gt;%
  summarise(rate = mean(Diabetes == &quot;Yes&quot;, na.rm = TRUE),
            se = sqrt(rate * (1 - rate) / n()))

p6 &lt;- ggplot(trend_dm, aes(x = Water_Q, y = rate, group = 1)) +
  geom_col(aes(fill = Water_Q), alpha = 0.7, width = 0.6) +
  geom_errorbar(aes(ymin = rate - 1.96*se, ymax = rate + 1.96*se), 
                width = 0.2, color = &quot;gray20&quot;) +
  geom_line(color = &quot;#d7191c&quot;, size = 1.2) +
  geom_point(color = &quot;#d7191c&quot;, size = 3) +
  scale_fill_manual(values = c(&quot;#d7191c&quot;, &quot;#fdae61&quot;, &quot;#abd9e9&quot;, &quot;#2c7bb6&quot;)) +
  scale_y_continuous(labels = scales::percent) +
  labs(title = &quot;Diabetes Prevalence by Water Intake Quartiles&quot;,
       x = &quot;Water Intake Quartile&quot;, y = &quot;Diabetes Prevalence&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;none&quot;)
print(p6)</code></pre>
<p><img src="coding_files/figure-html/visulization-6.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig6_diabetes_prevalence.png&quot;, p6, width = 8, height = 6, dpi = 300)

#Figure 7: Mean HbA1c by quartiles
trend_hba1c &lt;- df %&gt;%
  group_by(Water_Q) %&gt;%
  summarise(mean = mean(HbA1c, na.rm = TRUE),
            se = sd(HbA1c, na.rm = TRUE) / sqrt(n()))

p7 &lt;- ggplot(trend_hba1c, aes(x = Water_Q, y = mean, group = 1)) +
  geom_col(aes(fill = Water_Q), alpha = 0.7, width = 0.6) +
  geom_errorbar(aes(ymin = mean - 1.96*se, ymax = mean + 1.96*se), 
                width = 0.2, color = &quot;gray20&quot;) +
  geom_line(color = &quot;#2c7bb6&quot;, size = 1.2) +
  geom_point(color = &quot;#2c7bb6&quot;, size = 3) +
  scale_fill_manual(values = c(&quot;#d7191c&quot;, &quot;#fdae61&quot;, &quot;#abd9e9&quot;, &quot;#2c7bb6&quot;)) +
  labs(title = &quot;Mean HbA1c by Water Intake Quartiles&quot;,
       x = &quot;Water Intake Quartile&quot;, y = &quot;Mean HbA1c (%)&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;none&quot;)
print(p7)</code></pre>
<p><img src="coding_files/figure-html/visulization-7.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig7_hba1c_mean.png&quot;, p7, width = 8, height = 6, dpi = 300)

#Figure 8: Correlation heatmap
cor_data &lt;- df %&gt;%
  select(Water_g, Age, BMI, Energy_kcal, Sugar_g, HbA1c) %&gt;%
  drop_na()

corrplot(cor(cor_data), 
         method = &quot;color&quot;, 
         type = &quot;upper&quot;,
         addCoef.col = &quot;black&quot;, 
         number.cex = 0.8,
         tl.col = &quot;black&quot;, 
         tl.srt = 45,
         col = colorRampPalette(c(&quot;#2c7bb6&quot;, &quot;white&quot;, &quot;pink&quot;))(200))</code></pre>
<p><img src="coding_files/figure-html/visulization-8.png" width="672" /></p>
<pre class="r"><code>png(&quot;figures/fig8_correlation.png&quot;, width = 2400, height = 2400, res = 300)
corrplot(cor(cor_data), 
         method = &quot;color&quot;, 
         type = &quot;upper&quot;,
         addCoef.col = &quot;black&quot;, 
         number.cex = 0.8,
         tl.col = &quot;black&quot;, 
         tl.srt = 45,
         col = colorRampPalette(c(&quot;#2c7bb6&quot;, &quot;white&quot;, &quot;pink&quot;))(200))
dev.off()</code></pre>
<pre><code>## png 
##   2</code></pre>
<pre class="r"><code>#Figure 9: Stratified by BMI
df &lt;- df %&gt;%
  mutate(BMI_cat = cut(BMI, 
                       breaks = c(0, 25, 30, Inf),
                       labels = c(&quot;Normal (&lt;25)&quot;, &quot;Overweight (25-30)&quot;, &quot;Obese (≥30)&quot;)))

p9 &lt;- ggplot(df, aes(x = Water_Q, y = HbA1c, fill = Water_Q)) +
  geom_boxplot(outlier.alpha = 0.3) +
  facet_wrap(~BMI_cat, nrow = 1) +
  stat_compare_means(method = &quot;anova&quot;) +
  scale_fill_manual(values = c(&quot;#d7191c&quot;, &quot;#fdae61&quot;, &quot;#abd9e9&quot;, &quot;#2c7bb6&quot;)) +
  labs(title = &quot;Water Intake and HbA1c Stratified by BMI&quot;,
       x = &quot;Water Intake Quartile&quot;, y = &quot;HbA1c (%)&quot;) +
  theme_minimal() +
  theme(legend.position = &quot;none&quot;)
print(p9)</code></pre>
<p><img src="coding_files/figure-html/visulization-9.png" width="672" /></p>
<pre class="r"><code>ggsave(&quot;figures/fig9_stratified_bmi.png&quot;, p9, width = 12, height = 5, dpi = 300)</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
